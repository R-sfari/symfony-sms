<script>
$(function() {
  "use strict";
  // page onload functions
  echarts_bar.init();
});
echarts_bar = {
    init: function() {
      var $elem = $("[data-echarts-bar],.data-echarts-bar");
      if ($elem.length) {
        $elem.each(function() {
            var $this = this,
              this_data = $($this).data('values');
            var $myChart = echarts.init($this);
            option = {
              color: ['#00bfa5','#3398DB','#e53935'],
              tooltip: {
                trigger: 'axis',
                axisPointer: { // 坐标轴指示器，坐标轴触发有效
                  type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                }
              },
              toolbox: {
                show: true,
                feature: {
                  saveAsImage: {
                    title: ' ',
                    show: true
                  }
                }
              },
              grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
              },
              xAxis: [{
                type: 'category',
                data: jQuery.map(this_data, function(n, i) {
                  return (n.month);
                }),
                axisTick: {
                  alignWithLabel: true
                }
              }],
              yAxis: [{
                type: 'value'
              }],
              series: [
              {% for key, val in attendance_professor %}
                {
                  name: "{{ val|trans }}",
                  type: 'bar',
                  data: jQuery.map(this_data, function(n, i) {
                    return (n.{{ key }});
                  })
                },
              {% endfor %}
            ]
            };
            $myChart.setOption(option);
          });

        }
      }
    }
</script>
